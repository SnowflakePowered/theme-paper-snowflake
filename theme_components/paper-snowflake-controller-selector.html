<link rel="import" href="../bower_components/paper-dropdown/paper-dropdown">
<link rel="import" href="../bower_components/paper-dropdown-menu/paper-dropdown-menu">
<link rel="import" href="../bower_components/paper-item/paper-item">
<link rel="import" href="../bower_components/core-menu/core-menu">
<polymer-element name="paper-snowflake-controller-selector" attributes="selectedController availableControllers">
  <template>
    <paper-dropdown-menu label="Controllers">
          <paper-dropdown class="dropdown">
              <core-menu class="menu" valueattr="controller-name" selected="0" on-core-select="{{controllerSelect}}">
                  <template repeat="{{controller in availableControllers | getKeys}}">
                    <paper-item controller-name="{{controller}}">{{availableControllers[controller].ControllerID}}</paper-item>
                  </template>
              </core-menu>
          </paper-dropdown>
      </paper-dropdown-menu>
  </template>
  <script>
    Polymer('paper-snowflake-controller-selector', {
      ready: function() {

      },
      getKeys: function(o){
        var _o = o || {};
        return Object.keys(_o);
      },
      controllerSelect: function(e){
        this.selectedController = this.availableControllers[e.detail.item.attributes['controller-name'].value];
      },
      selectedControllerChanged: function(){

        console.log("controller switched to " + this.selectedController.ControllerID);
      }
    });
  </script>
</polymer-element>
<paper-snowflake-controller-selector></paper-snowflake-controller-selector>
