<link rel="import" href="paper-fonts">
<!--<link rel="import" href="../bower_components/core-selector/core-selector">-->
<link rel="import" href="../bower_components/paper-item/paper-item">

<polymer-element name="paper-snowflake-platform-selector" attributes="selectedPlatform availablePlatforms">
  <template>
      <link rel="stylesheet" type="text/css" href="style/paper-snowflake-platform-selector.css"/>
      <div class="sidebar" id="platformSelectorContainer">
        	<core-selector id="platformSelector" on-core-select="{{platformSelect}}" selected="{{_selected}}">
      			<template repeat="{{platform in availablePlatforms | getKeys}}">
      				<paper-item class="item"
                platform-id="{{availablePlatforms[platform].PlatformID}}"
                name="{{availablePlatforms[platform].Name}}">
                  {{availablePlatforms[platform].Name}}
              </paper-item>
      			</template>
      		</core-selector>
      </div>
  </template>
  <script>
       Polymer('paper-snowflake-platform-selector', {
        getKeys : function(o){
          return Object.keys(o);
        },
        platformSelect: function(e) {
          this.selectedPlatform = this.availablePlatforms[e.detail.item.attributes['platform-id'].value];
          localStorage.setItem('selectedplatform', this._selected);
        },
        ready: function() {
          var x = localStorage.getItem('selectedplatform');
          if(x){
            this._selected = x;
          }else{
            this._selected = 0;
          }
        },
        availablePlatformsChanged: function(){
        },
      });
  </script>
</polymer-element>
